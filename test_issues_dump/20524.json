{
  "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524",
  "repository_url": "https://api.github.com/repos/eclipse-openj9/openj9",
  "labels_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524/labels{/name}",
  "comments_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524/comments",
  "events_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524/events",
  "html_url": "https://github.com/eclipse-openj9/openj9/issues/20524",
  "id": 2639375548,
  "node_id": "I_kwDOBgtddc6dUay8",
  "number": 20524,
  "title": "Format code using clang-format",
  "user": {
    "login": "ThanHenderson",
    "id": 35206064,
    "node_id": "MDQ6VXNlcjM1MjA2MDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35206064?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ThanHenderson",
    "html_url": "https://github.com/ThanHenderson",
    "followers_url": "https://api.github.com/users/ThanHenderson/followers",
    "following_url": "https://api.github.com/users/ThanHenderson/following{/other_user}",
    "gists_url": "https://api.github.com/users/ThanHenderson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ThanHenderson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ThanHenderson/subscriptions",
    "organizations_url": "https://api.github.com/users/ThanHenderson/orgs",
    "repos_url": "https://api.github.com/users/ThanHenderson/repos",
    "events_url": "https://api.github.com/users/ThanHenderson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ThanHenderson/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1645683046,
      "node_id": "MDU6TGFiZWwxNjQ1NjgzMDQ2",
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/labels/discussion",
      "name": "discussion",
      "color": "42d6ac",
      "default": false,
      "description": ""
    },
    {
      "id": 6945812046,
      "node_id": "LA_kwDOBgtddc8AAAABngCuTg",
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/labels/tech%20debt",
      "name": "tech debt",
      "color": "D2D66E",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 1,
  "created_at": "2024-11-06T22:28:20Z",
  "updated_at": "2024-11-07T17:53:51Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "type": null,
  "active_lock_reason": null,
  "sub_issues_summary": {
    "total": 0,
    "completed": 0,
    "percent_completed": 0
  },
  "body": "This issue stands as proposal to automate code formatting throughout the OpenJ9 codebase, using a tool like [clang-format](https://clang.llvm.org/docs/ClangFormat.html).\r\n\r\nOn the OMR side, [work is being done](https://github.com/eclipse-omr/omr/issues/7434) towards automated formatting using clang-format with integration into the CI pipeline. This current proposal builds off that work and a [previous OMR proposal](https://github.com/eclipse-omr/omr/issues/4577).\r\n\r\nBoth of those issues contain valuable discussions that are worth reading, and much of it applies here. Without belabouring the points made therein, here are what I believe to be benefited the most by using such a tool:\r\n\r\n#### Reading\r\n- Automated formatting produces more readable code; one knows what to expect. The selected format likely will not be anyone's favourite, but it will at least be enforced consistently.\r\n\r\n#### Writing\r\n- One need not spend time to ensure proper formatting manually. `clang-format` integrates well with IDEs and editors to format-on-save, and if not integrated, can be simply run from the command line, and easily integrated into a CI pipeline.\r\n\r\n#### Reviewing\r\n- An automated formatting tool reduces reviewer and author overhead by removing virtually all formatting related comments, allowing the review to focus on semantics of the proposed change, speeding up the reviewing/addressing cycle, and reducing the time-to-merge.\r\n\r\n## Goals\r\n - Format the C/C++ codebase in its entirety, or a selected set of directories, using clang-format\r\n - Add automation via GitHub hooks to validate code format of every commit within a PR\r\n - Provide optional git hooks that enable automatic formatting of a git commit\r\n - Provide instructions on setting up clang-format on the most popular code editors (VSCode, vim/nvim, emacs, eclipse, etc.)\r\n - Minimize spending reviewer/author resources on any stylistic PR comments and allow us to focus on the semantics of the patch\r\n\r\nThis issue will serve as a forum of discussion and sharing opinion. Feel free to voice concerns, support, and suggestions.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524/timeline",
  "performed_via_github_app": null,
  "state_reason": null,
  "timeline_data": [
    {
      "id": 15160933350,
      "node_id": "LE_lADOBgtddc6dUay8zwAAAAOHqXvm",
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/events/15160933350",
      "actor": {
        "login": "ThanHenderson",
        "id": 35206064,
        "node_id": "MDQ6VXNlcjM1MjA2MDY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/35206064?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ThanHenderson",
        "html_url": "https://github.com/ThanHenderson",
        "followers_url": "https://api.github.com/users/ThanHenderson/followers",
        "following_url": "https://api.github.com/users/ThanHenderson/following{/other_user}",
        "gists_url": "https://api.github.com/users/ThanHenderson/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ThanHenderson/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ThanHenderson/subscriptions",
        "organizations_url": "https://api.github.com/users/ThanHenderson/orgs",
        "repos_url": "https://api.github.com/users/ThanHenderson/repos",
        "events_url": "https://api.github.com/users/ThanHenderson/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ThanHenderson/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "event": "labeled",
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-06T22:28:20Z",
      "label": {
        "name": "tech debt",
        "color": "D2D66E"
      },
      "performed_via_github_app": null
    },
    {
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/comments/2460920718",
      "html_url": "https://github.com/eclipse-openj9/openj9/issues/20524#issuecomment-2460920718",
      "issue_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524",
      "id": 2460920718,
      "node_id": "IC_kwDOBgtddc6SrquO",
      "user": {
        "login": "github-actions[bot]",
        "id": 41898282,
        "node_id": "MDM6Qm90NDE4OTgyODI=",
        "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/github-actions%5Bbot%5D",
        "html_url": "https://github.com/apps/github-actions",
        "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
        "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
        "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
        "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
        "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
        "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
        "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
        "type": "Bot",
        "user_view_type": "public",
        "site_admin": false
      },
      "created_at": "2024-11-06T22:28:45Z",
      "updated_at": "2024-11-06T22:28:45Z",
      "author_association": "NONE",
      "body": "Issue Number: 20524\nStatus: Open\nRecommended Components: comp:build, comp:vm, comp:test\nRecommended Assignees: keithc-ca, adambrousseau, tajila\n",
      "reactions": {
        "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/comments/2460920718/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "performed_via_github_app": {
        "id": 15368,
        "client_id": "Iv1.05c79e9ad1f6bdfa",
        "slug": "github-actions",
        "node_id": "MDM6QXBwMTUzNjg=",
        "owner": {
          "login": "github",
          "id": 9919,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjk5MTk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/9919?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/github",
          "html_url": "https://github.com/github",
          "followers_url": "https://api.github.com/users/github/followers",
          "following_url": "https://api.github.com/users/github/following{/other_user}",
          "gists_url": "https://api.github.com/users/github/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/github/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/github/subscriptions",
          "organizations_url": "https://api.github.com/users/github/orgs",
          "repos_url": "https://api.github.com/users/github/repos",
          "events_url": "https://api.github.com/users/github/events{/privacy}",
          "received_events_url": "https://api.github.com/users/github/received_events",
          "type": "Organization",
          "user_view_type": "public",
          "site_admin": false
        },
        "name": "GitHub Actions",
        "description": "Automate your workflow from idea to production",
        "external_url": "https://help.github.com/en/actions",
        "html_url": "https://github.com/apps/github-actions",
        "created_at": "2018-07-30T09:30:17Z",
        "updated_at": "2025-03-07T16:35:00Z",
        "permissions": {
          "actions": "write",
          "administration": "read",
          "attestations": "write",
          "checks": "write",
          "contents": "write",
          "deployments": "write",
          "discussions": "write",
          "issues": "write",
          "merge_queues": "write",
          "metadata": "read",
          "models": "read",
          "packages": "write",
          "pages": "write",
          "pull_requests": "write",
          "repository_hooks": "write",
          "repository_projects": "write",
          "security_events": "write",
          "statuses": "write",
          "vulnerability_alerts": "read"
        },
        "events": [
          "branch_protection_rule",
          "check_run",
          "check_suite",
          "create",
          "delete",
          "deployment",
          "deployment_status",
          "discussion",
          "discussion_comment",
          "fork",
          "gollum",
          "issues",
          "issue_comment",
          "label",
          "merge_group",
          "milestone",
          "page_build",
          "project",
          "project_card",
          "project_column",
          "public",
          "pull_request",
          "pull_request_review",
          "pull_request_review_comment",
          "push",
          "registry_package",
          "release",
          "repository",
          "repository_dispatch",
          "status",
          "watch",
          "workflow_dispatch",
          "workflow_run"
        ]
      },
      "event": "commented",
      "actor": {
        "login": "github-actions[bot]",
        "id": 41898282,
        "node_id": "MDM6Qm90NDE4OTgyODI=",
        "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/github-actions%5Bbot%5D",
        "html_url": "https://github.com/apps/github-actions",
        "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
        "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
        "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
        "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
        "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
        "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
        "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
        "type": "Bot",
        "user_view_type": "public",
        "site_admin": false
      }
    },
    {
      "id": 15186107520,
      "node_id": "LE_lADOBgtddc6dUay8zwAAAAOJKZyA",
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/events/15186107520",
      "actor": {
        "login": "tajila",
        "id": 12551021,
        "node_id": "MDQ6VXNlcjEyNTUxMDIx",
        "avatar_url": "https://avatars.githubusercontent.com/u/12551021?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tajila",
        "html_url": "https://github.com/tajila",
        "followers_url": "https://api.github.com/users/tajila/followers",
        "following_url": "https://api.github.com/users/tajila/following{/other_user}",
        "gists_url": "https://api.github.com/users/tajila/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tajila/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tajila/subscriptions",
        "organizations_url": "https://api.github.com/users/tajila/orgs",
        "repos_url": "https://api.github.com/users/tajila/repos",
        "events_url": "https://api.github.com/users/tajila/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tajila/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "event": "labeled",
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-07T16:33:36Z",
      "label": {
        "name": "discussion",
        "color": "42d6ac"
      },
      "performed_via_github_app": null
    }
  ],
  "comments_data": [
    {
      "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/comments/2460920718",
      "html_url": "https://github.com/eclipse-openj9/openj9/issues/20524#issuecomment-2460920718",
      "issue_url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/20524",
      "id": 2460920718,
      "node_id": "IC_kwDOBgtddc6SrquO",
      "user": {
        "login": "github-actions[bot]",
        "id": 41898282,
        "node_id": "MDM6Qm90NDE4OTgyODI=",
        "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/github-actions%5Bbot%5D",
        "html_url": "https://github.com/apps/github-actions",
        "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
        "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
        "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
        "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
        "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
        "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
        "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
        "type": "Bot",
        "user_view_type": "public",
        "site_admin": false
      },
      "created_at": "2024-11-06T22:28:45Z",
      "updated_at": "2024-11-06T22:28:45Z",
      "author_association": "NONE",
      "body": "Issue Number: 20524\nStatus: Open\nRecommended Components: comp:build, comp:vm, comp:test\nRecommended Assignees: keithc-ca, adambrousseau, tajila\n",
      "reactions": {
        "url": "https://api.github.com/repos/eclipse-openj9/openj9/issues/comments/2460920718/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "performed_via_github_app": {
        "id": 15368,
        "client_id": "Iv1.05c79e9ad1f6bdfa",
        "slug": "github-actions",
        "node_id": "MDM6QXBwMTUzNjg=",
        "owner": {
          "login": "github",
          "id": 9919,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjk5MTk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/9919?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/github",
          "html_url": "https://github.com/github",
          "followers_url": "https://api.github.com/users/github/followers",
          "following_url": "https://api.github.com/users/github/following{/other_user}",
          "gists_url": "https://api.github.com/users/github/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/github/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/github/subscriptions",
          "organizations_url": "https://api.github.com/users/github/orgs",
          "repos_url": "https://api.github.com/users/github/repos",
          "events_url": "https://api.github.com/users/github/events{/privacy}",
          "received_events_url": "https://api.github.com/users/github/received_events",
          "type": "Organization",
          "user_view_type": "public",
          "site_admin": false
        },
        "name": "GitHub Actions",
        "description": "Automate your workflow from idea to production",
        "external_url": "https://help.github.com/en/actions",
        "html_url": "https://github.com/apps/github-actions",
        "created_at": "2018-07-30T09:30:17Z",
        "updated_at": "2025-03-07T16:35:00Z",
        "permissions": {
          "actions": "write",
          "administration": "read",
          "attestations": "write",
          "checks": "write",
          "contents": "write",
          "deployments": "write",
          "discussions": "write",
          "issues": "write",
          "merge_queues": "write",
          "metadata": "read",
          "models": "read",
          "packages": "write",
          "pages": "write",
          "pull_requests": "write",
          "repository_hooks": "write",
          "repository_projects": "write",
          "security_events": "write",
          "statuses": "write",
          "vulnerability_alerts": "read"
        },
        "events": [
          "branch_protection_rule",
          "check_run",
          "check_suite",
          "create",
          "delete",
          "deployment",
          "deployment_status",
          "discussion",
          "discussion_comment",
          "fork",
          "gollum",
          "issues",
          "issue_comment",
          "label",
          "merge_group",
          "milestone",
          "page_build",
          "project",
          "project_card",
          "project_column",
          "public",
          "pull_request",
          "pull_request_review",
          "pull_request_review_comment",
          "push",
          "registry_package",
          "release",
          "repository",
          "repository_dispatch",
          "status",
          "watch",
          "workflow_dispatch",
          "workflow_run"
        ]
      }
    }
  ]
}